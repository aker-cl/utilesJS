<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UtilesJS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css" rel="stylesheet"> -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" /> -->
    <link href="css/checkSwitch.css" rel="stylesheet">

    <!-- <script src="https://code.jquery.com/jquery-3.7.0.slim.js" integrity="sha256-7GO+jepT9gJe9LB4XFf8snVOjX3iYNb0FHYr5LI1N5c=" crossorigin="anonymous"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script> -->
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
    crossorigin="anonymous"/>

    <style>
        .container-grid-left {
            background: crimson;
            overflow: hidden;
        }

        .container-grid-right {
            background: navajowhite;
            overflow: hidden;
        }

        .container-grid:has(.container-grid-left:hover) {
            grid-template-columns: 100% auto;
        }

        .container-grid-left:hover::after .container-grid {
            grid-template-columns: 50% auto;
        }

        .container-grid-right:hover::after .container-grid {
            grid-template-columns: auto 50%;
        }

        .container-grid:has(.container-grid-right:hover) {
            grid-template-columns: auto 100%;
        }

        .container-grid {
            transition: 500ms;
            display: grid;
            grid-template-columns: 50% auto;
        }
    </style>
</head>
<body>
    <!-- Responsive navbar-->
    <nav id="navbar" class="navbar fixed-top navbar-expand-lg bg-body-tertiary" style="background-color: black;">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Test</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Dropdown
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" aria-disabled="true">Disabled</a>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
      </nav>
    <!-- Header-->
    <header class="bg-dark py-5">
        <div class="container px-5">
            <div class="row gx-5 justify-content-center">
                <div class="col-lg-6">
                    <div class="text-center my-5">
                        <h1 class="display-5 fw-bolder text-white mb-2">Test</h1>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <section class="bg-light py-5">
        <div class="container px-5 my-5">
            <article>
                <div class="container-grid">
                    <div class="container-grid-left">
                        <h2>Sección</h2>
                        
                    </div>
                    <div class="container-grid-right">
                        <h2>Sección</h2>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 mb-3">
                       
                    </div>
                    <div class="col-md-8">
                        <div id="section1">
                            <h2>Sección 1</h2>
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Last name</th>
                                        <th>Age</th>
                                        <th>Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                    <tr>
                                        <td>David</td>
                                        <td>Johnson</td>
                                        <td>22</td>
                                        <td>UK</td>
                                    </tr>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                </tbody>
                            </table>
                          </div>
                          
                          <div id="section2">
                            <h2>Sección 2</h2>
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Last name</th>
                                        <th>Age</th>
                                        <th>Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                    <tr>
                                        <td>David</td>
                                        <td>Johnson</td>
                                        <td>22</td>
                                        <td>UK</td>
                                    </tr>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                </tbody>
                            </table>
                          </div>
                          
                          <div id="section3">
                            <h2>Sección 3</h2>
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Last name</th>
                                        <th>Age</th>
                                        <th>Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                    <tr>
                                        <td>David</td>
                                        <td>Johnson</td>
                                        <td>22</td>
                                        <td>UK</td>
                                    </tr>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div id="subsection1">
                              <h3>Subsección 1</h3>
                              <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Last name</th>
                                        <th>Age</th>
                                        <th>Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                    <tr>
                                        <td>David</td>
                                        <td>Johnson</td>
                                        <td>22</td>
                                        <td>UK</td>
                                    </tr>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                </tbody>
                            </table>
                            </div>
                            
                            <div id="subsection2">
                              <h3>Subsección 2</h3>
                              <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Last name</th>
                                        <th>Age</th>
                                        <th>Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                    <tr>
                                        <td>David</td>
                                        <td>Johnson</td>
                                        <td>22</td>
                                        <td>UK</td>
                                    </tr>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                </tbody>
                            </table>
                            </div>
                            
                            <div id="subsection3">
                              <h3>Subsección 3</h3>
                              <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Last name</th>
                                        <th>Age</th>
                                        <th>Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                    <tr>
                                        <td>David</td>
                                        <td>Johnson</td>
                                        <td>22</td>
                                        <td>UK</td>
                                    </tr>
                                    <tr>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>25</td>
                                        <td>USA</td>
                                    </tr>
                                    <tr>
                                        <td>Alice</td>
                                        <td>Smith</td>
                                        <td>30</td>
                                        <td>Canada</td>
                                    </tr>
                                </tbody>
                            </table>
                            </div>
                          </div>
                    </div>
                </div>             
            </article>
        </div>
        <span id="numberEl"></span>
    </section>
</body>
</html>
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script> -->
<!-- <script src="./js/utiles.js"></script> -->
<!-- <script src="../dist/umd/utiles.js"></script> -->

<!-- <script>
    const ut = UtilesJS();
    console.log(UtilesJS());
</script> -->
<!-- <script src="./test.js" type="module"></script> -->

<script>
    // var scrollspy = new bootstrap.ScrollSpy(document.getElementById('sidebar'), {
    //     target: '#sidebar',
    //     offset: 50
    // });

        const scrollTransition = (elementId, topElementId = null, bottomElementId = null, scrollFocus = null) => {
            var scrollY = window.scrollY;
            var diffWidth = 0;
            var addHeight = 0;
            var addBottom = 0;

            if(scrollFocus){
                let elementListener = document.querySelector(`#${scrollFocus}`);
                addHeight = 35; 
                addBottom = 20;
                elementListener.addEventListener('scroll', function() {
                    diffWidth = 0.18;
                    setPositions();
                });
            }else{
                addHeight = 7;
                addBottom = -55;
                window.addEventListener('scroll', () => {
                    setPositions();
                });
            }

            function setPositions(){
                const element = document.querySelector(`#${elementId}`);
                const parentElement = element.parentNode;
                const elementRect = parentElement.getBoundingClientRect();
                const elementTop = parentElement.getBoundingClientRect().top + scrollY;
                const elementStyle = getComputedStyle(parentElement);
                const widthScreen = window.innerWidth;
                
                /** Top element limit */
                let topElement;
                let topElementStyle;
                let heightTopElement;
                let topElementRect;

                /** Bottom element limit */
                let bottomElement;
                let bottomElementStyle;
                let bottomElementRect;
                let bottomBottomElement;
                
                if(topElementId){
                    topElement = document.querySelector(`#${topElementId}`);
                    topElementStyle = getComputedStyle(topElement);
                    heightTopElement = parseFloat(topElementStyle.getPropertyValue("height")) + addHeight;
                    topElementRect = topElement.getBoundingClientRect();
                }

                if(bottomElementId){
                    bottomElement = document.querySelector(`#${bottomElementId}`);
                    bottomElementStyle = getComputedStyle(bottomElement);
                    bottomBottomElement = parseFloat(bottomElementStyle.getPropertyValue("bottom"));
                    bottomElementRect = bottomElement.getBoundingClientRect();
                }

                let widthWithPadding = elementStyle.getPropertyValue("width");
                let paddingLeft = parseFloat(elementStyle.getPropertyValue("padding-left"));
                let paddingRight = parseFloat(elementStyle.getPropertyValue("padding-right"));
                let realWidth = parseFloat(widthWithPadding) - (paddingLeft + paddingRight);
                let totalWidth = ((realWidth * 100) / widthScreen) + 0.15 - diffWidth;
                
                if(topElementId){
                    if(bottomElementId){
                        if (topElementRect.bottom <= elementRect.top) {
                            cleanElement();
                        } else if(topElementRect.bottom >= elementRect.top){
                            if(bottomElementRect.height - addBottom >= elementRect.bottom){
                                setPropElement('sticky', `${bottomBottomElement}px`, '');                                
                            }else{
                                setPropElement('fixed', `${heightTopElement}px`, `${totalWidth}%`);                                
                            }                   
                        }
                    }else{
                        if (topElementRect.bottom <= elementRect.top) {
                            cleanElement();
                        } else if(topElementRect.bottom >= elementRect.top){
                            setPropElement('fixed', `${heightTopElement}px`, `${totalWidth}%`);               
                        }
                    }
                }else if(bottomElementId){
                    if (scrollY <= elementTop) {
                        cleanElement();
                    } else if(scrollY >= elementRect.top){
                        if(scrollY >= elementRect.bottom){
                            setPropElement('sticky', '5px', '');
                        }else{
                            setPropElement('fixed', '5px', `${totalWidth}%`);
                        }                   
                    }        
                }else{
                    if (scrollY >= elementTop && scrollY <= elementTop + parentElement.offsetHeight) {
                        setPropElement('fixed', '5px', `${totalWidth}%`);
                    } else {
                        cleanElement();
                    }
                }

                function cleanElement(){
                    element.style.position = 'sticky';
                    element.style.top = '';
                    element.style.width = '';
                }

                function setPropElement(pos, top, width){
                    element.style.position = pos;
                    element.style.top = top;
                    element.style.width = width;
                }
            }
        }

    // scrollTransition('divInput', 'navbar', 'tableFilter');
</script>